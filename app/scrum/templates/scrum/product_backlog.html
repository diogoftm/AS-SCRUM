{% extends "scrum/base2.html" %}
{% block content %}
{% load static %}


<link rel="stylesheet" type="text/css" href="{% static 'users/static/css/all.min.css'  %}">
<!-- Ekko Lightbox -->
<link rel="stylesheet" type="text/css" href="{% static 'users/static/css/ekko-lightbox.css' %}">
<!-- Theme style -->
<link rel="stylesheet" type="text/css" href="{% static 'users/static/css/adminlte.min.css' %}">
<!-- overlayScrollbars -->
<link rel="stylesheet" type="text/css" href="{% static 'users/static/css/OverlayScrollbars.min.css' %}">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback%22%3E">

<style>
    h1 {
        color:white;
    }

    h5.card-title {
        text-align: left;
    }
    div.scroll {

            background-color: white;
            width: 270px;
            height: 500px;
            overflow-x: hidden;
            overflow-y: auto;
            text-align:justify;
        }


  h1 {
      color:white;
  }

  h5.card-title {
      text-align: left;
  }



* {
box-sizing: border-box;
}

body {
font-family: Arial, Helvetica, sans-serif;
}

/* Float four columns side by side */
.column1 {
float: left;
width: 33%;
padding: 0 10px;
}

/* Remove extra left and right margins, due to padding */
.row1 {margin: 0 -5px;}

/* Clear floats after the columns */
.row1:after {
content: "";
display: table;
clear: both;
}

/* Responsive columns */
@media screen and (max-width: 600px) {
.column1 {
  width: 100%;
  display: block;
  margin-bottom: 20px;
}
}



</style>

<section class="content pb-3">
  <div class="container-fluid h-100">
     <div class="card card-row card-secondary">
        <div class="card-header">
           <h3 style="font-size: 30px" class="card-title">
              Product Backlog {{n}}
           </h3>
        </div>

        <br>

          <div class="container">
            <table class="table table-striped table-hover">
              <tr>
                <th>Task <a href="/projects/{{project.id}}/add_task"><button type="button" class="btn btn-primary btn-sm" >Create</button></a></th>
                <th>Description</th>
                <th>Sprint</th>
              </tr>
          {% for task in tasks %}

            {% if task.priority == 4%}
                {% if task.points == 1 %}
                    <tr class="table-primary">
                <td>


                {% endif %}
                {% if task.points == 2 %}

                  <tr class="table-success">
                <td>

                {% endif %}
                {% if task.points == 4 %}

                    <tr class="table-warning">
                <td>

                {% endif %}
                {% if task.points == 8 %}

                  <tr class="table-danger">
                <td>

                {% endif %}
                    <h5 class="card-title">{{task.title}}</h5>
                    </td>
                <td>
                    <h6 class="card-title">As a {{task.as_a}}. I want {{task.i_want}}. So that {{task.so_that}}</h6>
                    </td>
                <td>
                    {% if task.in_sprint == 0%}

                      <form action="add_task_sprint" method="post">
                          {% csrf_token %}
                          <select name="task_id" style="display: none;">
                              <option value="{{task.id}}"></option>
                          </select>
                          <select name="sprint_number">
                              {% for sprint in sprints %}
                              <option value="{{sprint.number}}">{{sprint.number}}</option>
                              {% endfor %}
                          </select>
                          <button type="submit" class="btn btn-outline-primary btn-sm">Add to sprint</button>
                      </form>
                    {%else%}
                    <p>{{task.in_sprint}}</p>

                    {% endif %}
                </td>
            {% endif %}
        {% endfor %}

                  {% for task in tasks %}

            {% if task.priority == 3%}
               {% if task.points == 1 %}
                    <tr class="table-primary">
                <td>


                {% endif %}
                {% if task.points == 2 %}

                  <tr class="table-success">
                <td>

                {% endif %}
                {% if task.points == 4 %}

                    <tr class="table-warning">
                <td>

                {% endif %}
                {% if task.points == 8 %}

                  <tr class="table-danger">
                <td>

                {% endif %}
                    <h5 class="card-title">{{task.title}}</h5>
                    </td>
                <td>
                    <h6 class="card-title">As a {{task.as_a}}. I want {{task.i_want}}. So that {{task.so_that}}</h6>
                    </td>
                <td>
                    {% if task.in_sprint == 0%}

                      <form action="add_task_sprint" method="post">
                          {% csrf_token %}
                          <select name="task_id" style="display: none;">
                              <option value="{{task.id}}"></option>
                          </select>
                          <select name="sprint_number">
                              {% for sprint in sprints %}
                              <option value="{{sprint.number}}">{{sprint.number}}</option>
                              {% endfor %}
                          </select>
                          <button type="submit" class="btn btn-outline-primary btn-sm">Add to sprint</button>
                      </form>
                    {%else%}
                    <p>{{task.in_sprint}}</p>

                    {% endif %}
                </td>
            {% endif %}
        {% endfor %}
                {% for task in tasks %}

            {% if task.priority == 2%}
                {% if task.points == 1 %}
                    <tr class="table-primary">
                <td>


                {% endif %}
                {% if task.points == 2 %}

                  <tr class="table-success">
                <td>

                {% endif %}
                {% if task.points == 4 %}

                    <tr class="table-warning">
                <td>

                {% endif %}
                {% if task.points == 8 %}

                  <tr class="table-danger">
                <td>

                {% endif %}
                    <h5 class="card-title">{{task.title}}</h5>
                    </td>
                <td>
                    <h6 class="card-title">As a {{task.as_a}}. I want {{task.i_want}}. So that {{task.so_that}}</h6>
                    </td>
                <td>
                    {% if task.in_sprint == 0%}

                      <form action="add_task_sprint" method="post">
                          {% csrf_token %}
                          <select name="task_id" style="display: none;">
                              <option value="{{task.id}}"></option>
                          </select>
                          <select name="sprint_number">
                              {% for sprint in sprints %}
                              <option value="{{sprint.number}}">{{sprint.number}}</option>
                              {% endfor %}
                          </select>
                          <button type="submit" class="btn btn-outline-primary btn-sm">Add to sprint</button>
                      </form>
                    {%else%}
                    <p>{{task.in_sprint}}</p>

                    {% endif %}
                </td>
            {% endif %}
        {% endfor %}
                {% for task in tasks %}

            {% if task.priority == 1%}
                {% if task.points == 1 %}
                    <tr class="table-primary">
                <td>


                {% endif %}
                {% if task.points == 2 %}

                  <tr class="table-success">
                <td>

                {% endif %}
                {% if task.points == 4 %}

                    <tr class="table-warning">
                <td>

                {% endif %}
                {% if task.points == 8 %}

                  <tr class="table-danger">
                <td>

                {% endif %}
                    <h5 class="card-title">{{task.title}}</h5>
                    </td>
                <td>
                    <h6 class="card-title">As a {{task.as_a}}. I want {{task.i_want}}. So that {{task.so_that}}</h6>
                    </td>
                <td>
                    {% if task.in_sprint == 0%}

                      <form action="add_task_sprint" method="post">
                          {% csrf_token %}
                          <select name="task_id" style="display: none;">
                              <option value="{{task.id}}"></option>
                          </select>
                          <select name="sprint_number">
                              {% for sprint in sprints %}
                              <option value="{{sprint.number}}">{{sprint.number}}</option>
                              {% endfor %}
                          </select>
                          <button type="submit" class="btn btn-outline-primary btn-sm">Add to sprint</button>
                      </form>
                    {%else%}
                    <p>{{task.in_sprint}}</p>

                    {% endif %}
                </td>
            {% endif %}
        {% endfor %}













                </td>
              </tr>   
            </table>
          </div>
                </div>
     </div>
  </div>
</section>


{% endblock content %}